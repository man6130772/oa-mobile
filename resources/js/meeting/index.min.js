define(["vue","css!iconfont","css!commoncss","css!meetingIndexCSS","common","swiper","vue.template"],function(e){function t(){var t,i=this,n=(new Date).Format("yyyy-MM-dd"),a="总部",o=[];this.handleBackClick=function(){$(".app-btn-back").off("click").on("click",function(){history.back()})},this.init=function(){i.handleBackClick(),i.initDateArr(),i.closeTipClick(),t=i.render("meetingIndexCon"),i.getAreaList(ajaxUrl.meetingIndexArea,t),i.getRoomState()},this.getAreaList=function(e,t){ajaxData("GET",e,function(e){t.areaList=e,o=e,t.$nextTick(function(){i.initSlide()})})},this.getRoomState=function(){ajaxData("GET",ajaxUrl.roomState,function(e){t.rooms=e},{area:a,date:n})},this.render=function(t){return new e({el:"#"+t,data:{areaList:[],rooms:[]}})},this.initDatePicker=function(e){$("#mTopPicker").val(e[0]),$("#mTopPicker").picker({toolbarTemplate:'<header class="bar bar-nav">                                      <button class="button button-link pull-right close-picker">确定</button>                                      <h1 class="title">请选择预定日期</h1>                                  </header>',cols:[{textAlign:"center",values:e}],onClose:function(e){n=e.value[0].split(" ")[0],i.getRoomState()}})},this.initDateArr=function(){for(var e=[],t=0;t<7;t++)e.push(function(e){var t=["周日","周一","周二","周三","周四","周五","周六"],i=new Date;return i.setDate(i.getDate()+e),i.getFullYear()+"-"+(i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1)+"-"+(i.getDate()<10?"0"+i.getDate():i.getDate())+" "+t[i.getDay()]}(t));i.initDatePicker(e)},this.initSlide=function(){$(".swiper-slide").eq(0).addClass("slide-active"),$(".swiper-container").swiper({slidesPerView:5.6}),i.areaClickHandle()},this.areaClickHandle=function(){$("#meetingIndex").off("click").on("click",".swiper-slide",function(){$(this).addClass("slide-active").siblings().removeClass("slide-active");var e=$(this).index();a!==o[e]&&(a=o[e],console.log(e,a),i.getRoomState())})},this.closeTipClick=function(){var e=-1;e=setTimeout(function(){$(".meeting-explain").css("visibility","hidden"),clearTimeout(e)},1e4),$("#meetingIndex").on("click",".icon-cha",function(){$(".meeting-explain").css("visibility","hidden")})}}return new t});
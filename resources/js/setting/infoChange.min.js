define(["css!commoncss","css!infoChangeCSS","common"],function(n){function e(){var n,e=this,t={telephone:{name:"座机",maxlength:13,errTip:"请输入正确的座机号码",check:function(n){return!!n&&/([0-9]{3,4}-)?[0-9]{7,8}/.test(n)}},mobile:{name:"手机号码",maxlength:11,errTip:"请输入正确的手机号码",check:function(n){return!!n&&/^1[3|4|5|7|8][0-9]{9}$/.test(n)}},email:{name:"邮箱",maxlength:"",errTip:"请输入正确的邮箱",check:function(n){return!!n&&/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/.test(n)}}};this.init=function(){e.handleBackClick(),n=getQueryString("name"),e.initShowInfo(),e.submitChange()},this.initShowInfo=function(){var e=t[n].name,a=t[n].maxlength,i=$("#newInfo");e&&(i.attr("placeholder","请输入新的"+e),i.attr("maxlength",a))},this.submitChange=function(){$("#infoChange").off("click").on("click",".button",e.sureChange),$(document).off("keydown").on("keydown",function(n){if(13===n.keyCode)return e.sureChange(),!1})},this.sureChange=function(){var a=t[n].check,i=$("#newInfo").val(),o=a(i),c={};c[n]=i,o?e.ajaxData(ajaxUrl.infoChange,c):$("#errTipInfoChange").html(t[n].errTip)},this.ajaxData=function(n,e){ajaxData("GET",n,function(n){console.log(n),n.resCode?$("#errTipInfoChange").val(n.msg):history.back()},e)},this.handleBackClick=function(){$(".app-btn-back").off("click").on("click",function(){history.back()})}}return new e});
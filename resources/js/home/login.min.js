define(["css!loginCSS","css!iconfont","common","vue"],function(){function n(){var n=this,e=function(){var n=navigator.userAgent;return n.indexOf("Safari")>-1&&n.indexOf("Chrome")==-1};this.init=function(){checkLogined(),n.initLogin()},this.login=function(){var n=$("#username").val(),o=$("#password").val();n&&o?ajaxData("POST",ajaxUrl.loginCheck,function(i){if(0==+i.logined){if(localStorage.setItem("loginState",1),e()){var t=isDev?"//"+location.hostname+"/pages/home/index.html":"//"+location.hostname+"/e-ban/pages/home/index.html",a='<form id="safariForm" style="display: none;" action="'+rootUrl+'/BelleOA_Moblie_0.1/VerufyLoginBySafari.do" method="post">                                                <input name="username" value='+n+' type="text">                                                <input name="password" value='+o+' type="password">                                                <input name="indexUrl" value='+t+' type="text">                                                <input type="submit" value="Save">                                            </form>';return $("body").append(a),void $("#safariForm").submit()}location.href="../home/index.html"}else $("#errTip").html(i.msg)},{username:n,password:o}):$("#errTip").html("用户名或密码不能为空！")},this.initLogin=function(){$("#loginBtn").off("click").on("click",function(){n.login()}),$(document).off("keydown").on("keydown",function(e){13===e.keyCode&&n.login()})}}return new n});